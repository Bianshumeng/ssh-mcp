# 实施计划

最后更新：2026-02-15

## 目标

以可回滚方式交付 profile 配置加载、动态切换、备注管理，并保持旧模式兼容。

## 分步计划

1. 配置层：定义 schema、文件加载、ENV 展开、active 校验。
2. 生命周期层：实现 profile manager（list/use/reload/note-update）。
3. 连接层：拆分 SSH 连接管理与命令执行函数。
4. 工具层：注册 exec/sudo + 新增 profile 工具。
5. 文档与测试：README、示例配置、单测和最小集成验证。

## 验收标准

- 旧模式启动与 `exec` 可用。
- `--config` 模式支持 list/use/reload/note-update。
- 无明文密码输出。
- 新增测试覆盖配置解析、ENV 展开、冲突参数。

## 风险与回滚

- 风险：切换时连接状态不一致、配置字段校验遗漏。
- 回滚：任一步出现高风险回归，回退到上一个可用提交并仅保留旧模式路径。

